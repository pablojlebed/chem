---
// src/layouts/BaseLayout.astro
const { title = "Pablo Lebed – Freelance Analytical Chemist" } = Astro.props;
// No explicit import of global.css here, it's handled by Astro's build system
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>{title}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
    <link rel="manifest" href="/site.webmanifest" />
    <style is:global>
      @import "../styles/global.css";
    </style>
    <script
      defer
      src="https://cloud.umami.is/script.js"
      data-website-id="545a05e7-69b0-4164-8107-6acb6143d88c"></script>
  </head>
  <body
    class="bg-transparent text-tron-cyan font-sans antialiased min-h-screen flex flex-col items-center py-8 px-4 sm:px-6 lg:px-8 selection:bg-tron-red selection:text-tron-black relative"
  >
    {/* Scanline Overlay */}
    <div
      class="pointer-events-none fixed inset-0 z-50 bg-[linear-gradient(rgba(18,16,16,0)_50%,rgba(0,0,0,0.1)_50%),linear-gradient(90deg,rgba(255,0,0,0.06),rgba(0,255,0,0.02),rgba(0,0,255,0.06))] bg-[length:100%_4px,3px_100%] pointer-events-none"
    >
    </div>
    <div
      class="w-full max-w-5xl bg-tron-dark-200/80 backdrop-blur-md rounded-xl shadow-[0_0_20px_rgba(255,0,51,0.1)] border border-tron-red/20 overflow-hidden"
    >
      <header
        class="bg-tron-dark-200/90 border-b border-tron-red/20 shadow-glow-red relative z-10"
      >
        <div
          class="max-w-6xl mx-auto px-6 py-6 flex items-center justify-between"
        >
          {/* Logo/Name Section */}
          <div>
            <a href="/" class="group block">
              <h1
                class="text-2xl font-bold leading-tight !my-0 text-tron-red group-hover:text-white transition-colors duration-200 drop-shadow-[0_0_5px_rgba(255,0,51,0.8)]"
              >
                Pablo J Lebed
              </h1>
              <p
                class="text-base font-semibold text-tron-cyan tracking-wide leading-tight !my-0 group-hover:text-tron-red transition-colors"
              >
                Analytical Chemist
              </p>
            </a>
          </div>

          {/* Mobile Menu Toggle */}
          <button
            id="menu-toggle"
            class="md:hidden text-tron-red focus:outline-none text-3xl leading-none hover:text-white hover:drop-shadow-[0_0_5px_rgba(255,0,51,1)] transition-all"
          >
            ☰
          </button>

          {/* Desktop Navigation */}
          {/* Desktop Navigation */}
          <nav
            id="navbar"
            class="hidden md:flex space-x-8 text-gray-200 font-semibold tracking-wide"
          >
            {
              [
                { href: "/", label: "Home" },
                { href: "/services", label: "Services" },
                { href: "/technical-notes", label: "Technical Notes" },
                { href: "/tools", label: "Tools" },
                { href: "/about", label: "About" },
                { href: "/contact", label: "Contact" },
              ].map((link) => {
                const isActive =
                  link.href === "/"
                    ? Astro.url.pathname === "/"
                    : Astro.url.pathname.startsWith(link.href);
                return (
                  <a
                    href={link.href}
                    class:list={[
                      isActive
                        ? "text-tron-red drop-shadow-[0_0_5px_rgba(255,0,51,0.5)] border-b-2 border-tron-red"
                        : "hover:text-tron-red hover:drop-shadow-[0_0_5px_rgba(255,0,51,0.8)] transition-all duration-200 border-b-2 border-transparent",
                    ]}
                  >
                    {link.label}
                  </a>
                );
              })
            }
          </nav>
        </div>

        {/* Mobile Navigation */}
        <div
          id="mobile-nav"
          class="md:hidden hidden px-6 pb-6 space-y-4 text-gray-200 font-semibold tracking-wide bg-tron-dark-200 border-t border-tron-red/20"
        >
          {
            [
              { href: "/", label: "Home" },
              { href: "/services", label: "Services" },
              { href: "/technical-notes", label: "Technical Notes" },
              { href: "/tools", label: "Tools" },
              { href: "/about", label: "About" },
              { href: "/contact", label: "Contact" },
            ].map((link) => {
              const isActive =
                link.href === "/"
                  ? Astro.url.pathname === "/"
                  : Astro.url.pathname.startsWith(link.href);
              return (
                <a
                  href={link.href}
                  class:list={[
                    "block p-2 rounded transition-colors duration-200",
                    isActive
                      ? "text-tron-red bg-tron-red/10"
                      : "hover:text-tron-red hover:bg-tron-red/10",
                  ]}
                >
                  {link.label}
                </a>
              );
            })
          }
        </div>
      </header>

      <main class="w-full mx-auto px-4 py-8 flex-grow relative z-0">
        <slot />
      </main>

      <hr />
      <footer
        class="text-sm text-tron-cyan py-8 mt-4 text-center bg-tron-dark-200/50"
      >
        © {new Date().getFullYear()} Pablo Lebed. All rights reserved.
      </footer>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const toggle = document.getElementById("menu-toggle");
        const mobileNav = document.getElementById("mobile-nav");
        if (toggle && mobileNav) {
          toggle.addEventListener("click", () => {
            mobileNav.classList.toggle("hidden");
          });
        }
      });
    </script>
  </body>
</html>
