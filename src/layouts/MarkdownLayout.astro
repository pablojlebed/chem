---
// src/layouts/MarkdownLayout.astro
import BaseLayout from "@layouts/BaseLayout.astro";

const { title, description, author, pubDate, updatedDate, heroImage, tags } =
  Astro.props;
---

<BaseLayout title={title} description={description}>
  <section class="max-w-4xl mx-auto py-12 md:py-16 px-4">
    <header class="mb-8 pb-4 border-b border-tron-red/20">
      <h1
        class="text-4xl md:text-5xl font-bold text-tron-red leading-tight mb-2"
      >
        {title}
      </h1>
      {
        author && (
          <p class="text-sm text-tron-cyan/80 mb-0">
            {" "}
            By: <span class="font-semibold text-tron-cyan">{author}</span>
          </p>
        )
      }

      {/* NEW: Date on its own line */}
      <p class="text-sm text-tron-cyan/80 mt-1">
        {/* Same style as author */}
        Published: {
          pubDate?.toLocaleDateString?.("en-US", {
            year: "numeric",
            month: "long",
            day: "numeric",
          })
        }
        {
          updatedDate && (
            <span>
              {" "}
              (Updated:{" "}
              {updatedDate.toLocaleDateString("en-US", {
                year: "numeric",
                month: "long",
                day: "numeric",
              })}
              )
            </span>
          )
        }
      </p>

      {
        tags && tags.length > 0 && (
          <div class="flex flex-wrap gap-2 mt-2">
            {tags.map((tag: string) => (
              <span class="text-xs font-semibold px-2 py-1 rounded-full bg-tron-red/20 text-tron-red border border-tron-red/30">
                {tag}
              </span>
            ))}
          </div>
        )
      }
    </header>

    {
      heroImage && (
        <img
          src={heroImage}
          alt={title}
          class="w-full h-auto object-contain mx-auto rounded-lg mb-8 shadow-lg border border-tron-red/20 bg-white"
        />
      )
    }

    <div
      class="mx-auto text-base leading-relaxed space-y-6 text-tron-cyan [&>a]:text-tron-red [&>a:hover]:underline [&>h2]:text-2xl [&>h2]:font-bold [&>h2]:text-tron-red [&>h3]:text-xl [&>h3]:text-tron-red [&>ul]:list-disc [&>ul]:pl-5 [&>ol]:list-decimal [&>ol]:pl-5 [&>blockquote]:border-l-4 [&>blockquote]:border-tron-red [&>blockquote]:pl-4 [&>blockquote]:italic [&>blockquote]:text-tron-cyan/80 [&_img]:bg-white [&_img]:rounded-lg [&_img]:shadow-lg [&_img]:mx-auto [&_img]:border [&_img]:border-tron-red/20"
    >
      <slot />
    </div>
  </section>
</BaseLayout>
