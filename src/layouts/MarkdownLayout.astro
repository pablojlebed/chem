---
// src/layouts/MarkdownLayout.astro
import BaseLayout from "./BaseLayout.astro";

const { title, description, author, pubDate, updatedDate, heroImage, tags } =
  Astro.props;
---

<BaseLayout title={title} description={description}>
  <section class="max-w-4xl mx-auto py-12 md:py-16 px-4">
    <header class="mb-8 pb-4 border-b border-gray-200">
      <h1
        class="text-4xl md:text-5xl font-bold text-gray-900 leading-tight mb-2"
      >
        {title}
      </h1>
      {
        author && (
          <p class="text-sm text-gray-600 mb-0">
            {" "}
            By: <span class="font-semibold">{author}</span>
          </p>
        )
      }

      {/* NEW: Date on its own line */}
      <p class="text-sm text-gray-600 mt-1">
        {/* Same style as author */}
        Published: {
          pubDate?.toLocaleDateString?.("en-US", {
            year: "numeric",
            month: "long",
            day: "numeric",
          })
        }
        {
          updatedDate && (
            <span>
              {" "}
              (Updated:{" "}
              {updatedDate.toLocaleDateString("en-US", {
                year: "numeric",
                month: "long",
                day: "numeric",
              })}
              )
            </span>
          )
        }
      </p>

      {
        tags && tags.length > 0 && (
          <div class="flex flex-wrap gap-2 mt-2">
            {tags.map((tag) => (
              <span class="text-xs font-semibold px-2 py-1 rounded-full bg-primary-blue text-white">
                {tag}
              </span>
            ))}
          </div>
        )
      }
    </header>

    {
      heroImage && (
        <img
          src={heroImage}
          alt={title}
          class="w-full h-auto object-contain mx-auto rounded-lg mb-8 shadow-lg border border-gray-100"
        />
      )
    }

    <div
      class="mx-auto text-base leading-relaxed space-y-6 text-gray-800 [&>a]:text-blue-600 [&>a:hover]:underline [&>h2]:text-2xl [&>h2]:font-bold [&>h3]:text-xl [&>ul]:list-disc [&>ul]:pl-5 [&>ol]:list-decimal [&>ol]:pl-5 [&>blockquote]:border-l-4 [&>blockquote]:pl-4 [&>blockquote]:italic [&>blockquote]:text-gray-600"
    >
      <slot />
    </div>
  </section>
</BaseLayout>
